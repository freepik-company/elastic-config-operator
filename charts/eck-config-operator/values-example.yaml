# Example values file for ECK Config Operator
# Copy this file to values.yaml and modify as needed

# CRD Configuration
crds:
  # Install CRDs as part of Helm installation
  # Set to false if you manage CRDs separately or they're already installed
  install: true
  
  # Keep CRDs on uninstall to prevent data loss
  # CRDs will have annotation: helm.sh/resource-policy: keep
  keep: true

controller:
  # Number of operator replicas
  replicaCount: 1

  image:
    repository: ghcr.io/freepik-company/eck-config-operator
    pullPolicy: IfNotPresent
    # tag: "1.0.0"  # Uncomment to use specific version

  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 128Mi

  # RBAC Configuration for Secret Access
  rbac:
    # Option 1: Cluster-wide secret access (simplest, recommended for most cases)
    clusterWideSecrets: true
    secretsNamespaces: []

    # Option 2: Namespace-specific secret access (more restrictive)
    # Uncomment and configure if you want to limit secret access to specific namespaces
    # clusterWideSecrets: false
    # secretsNamespaces:
    #   - default           # Namespace where Elasticsearch runs
    #   - elasticsearch     # Additional namespace with ES credentials
    #   - prod              # Production namespace
    #   - staging           # Staging namespace

  # Enable autoscaling for production environments
  autoscaling:
    enabled: false
    # enabled: true
    # minReplicas: 2
    # maxReplicas: 10
    # targetCPUUtilizationPercentage: 70
    # targetMemoryUtilizationPercentage: 80

  # Node selector for specific node pools
  # nodeSelector:
  #   workload: operators

  # Tolerations for tainted nodes
  # tolerations:
  #   - key: "workload"
  #     operator: "Equal"
  #     value: "operators"
  #     effect: "NoSchedule"

  # Affinity rules for pod placement
  # affinity:
  #   podAntiAffinity:
  #     preferredDuringSchedulingIgnoredDuringExecution:
  #       - weight: 100
  #         podAffinityTerm:
  #           labelSelector:
  #             matchExpressions:
  #               - key: app.kubernetes.io/name
  #                 operator: In
  #                 values:
  #                   - eck-config-operator
  #           topologyKey: kubernetes.io/hostname

  metrics:
    enabled: true
    service:
      enabled: true
      type: ClusterIP
      port: 8443
      # annotations:
      #   prometheus.io/scrape: "true"
      #   prometheus.io/port: "8443"

# Examples of different RBAC configurations:

# Example 1: Development - Cluster-wide access
# controller:
#   rbac:
#     clusterWideSecrets: true

# Example 2: Production - Limited to specific namespaces
# controller:
#   rbac:
#     clusterWideSecrets: false
#     secretsNamespaces:
#       - prod-elasticsearch
#       - prod-apps

# Example 3: Multi-tenant - Each team's namespace
# controller:
#   rbac:
#     clusterWideSecrets: false
#     secretsNamespaces:
#       - team-a
#       - team-b
#       - team-c
#       - shared-services

